!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).FormStorage=e()}(this,(function(){"use strict";var t=Object.defineProperty,e=(e,i,n)=>(((e,i,n)=>{i in e?t(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n})(e,"symbol"!=typeof i?i+"":i,n),n);const i={name:"form",ignores:[],includes:[],checkbox:null};return class{constructor(t,n){e(this,"_selector"),e(this,"_option"),e(this,"_checkbox",null),this.t=t,this.i=Object.assign({},i,n),this.i.checkbox&&(this.o=document.querySelector(this.i.checkbox),this.h())}save(){window.localStorage.setItem(this.i.name,this.l())}apply(){const t=window.localStorage.getItem(this.i.name);t&&this.u(t)}clear(){window.localStorage.removeItem(this.i.name)}m(){return document.querySelector(this.t)}h(){this.m().addEventListener("submit",(()=>{var t;(null==(t=this.o)?void 0:t.checked)?this.save():this.clear()}))}l(){return t=this.m(),new URLSearchParams([...new FormData(t)].map((([t,e])=>[t,String(e)]))).toString();var t}u(t){const{ignores:e,includes:i}=this.i;(function(t){const e=new URLSearchParams(t);return new Map(Array.from(e.keys()).map((t=>[t,e.getAll(t)])))})(t).forEach(((t,n)=>{const s=Array.from(this.m().querySelectorAll(`input[name="${n}"]`));0!==s.length&&"file"!==s[0].type&&(e.some((t=>s[0].matches(t)))||i.some((t=>!s[0].matches(t)))||s.some((t=>t.type!==s[0].type))||(["radio","checkbox"].includes(s[0].type)?s.forEach((e=>{t.forEach((t=>{e.value===t&&(e.checked=!0)}))})):s.length>1||(s[0].value=t[0])))}))}}}));
