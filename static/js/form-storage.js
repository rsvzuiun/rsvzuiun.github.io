!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).FormStorage=e()}(this,(function(){"use strict";var t=Object.defineProperty,e=(e,n,i)=>(((e,n,i)=>{n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i})(e,"symbol"!=typeof n?n+"":n,i),i);return class{constructor(t,n){e(this,"_selector"),e(this,"_option"),e(this,"_checkbox",null),this.t=t,this.i={name:"form",ignores:[],includes:[],checkbox:null,...n},document.addEventListener("DOMContentLoaded",(()=>{this.i.checkbox&&(this.o=document.querySelector(this.i.checkbox),this.h())}))}save(){window.localStorage.setItem(this.i.name,this.u())}apply(){const t=window.localStorage.getItem(this.i.name);t&&this.l(t)}clear(){window.localStorage.removeItem(this.i.name)}addEventListener(t,e,n){this.m().addEventListener(t,e,n)}addChildrenEventListener(t,e,n){this.p().forEach((i=>i.addEventListener(t,e,n)))}m(){return document.querySelector(this.t)}p(){const{ignores:t,includes:e}=this.i;return[...document.querySelectorAll(`${this.t} input:not([type="file"]):not([type="password"]), select, textarea`)].filter((n=>t.every((t=>!n.matches(t)))&&(0===e.length||e.some((t=>n.matches(t))))))}_(){const t=new FormData(this.m()),e=this.p().map((t=>t.name));return[...t.keys()].forEach((n=>{e.includes(n)||t.delete(n)})),new URLSearchParams([...t].map((([t,e])=>[t,String(e)]))).toString()}h(){this.m().addEventListener("submit",(()=>{var t;(null==(t=this.o)?void 0:t.checked)?this.save():this.clear()}))}u(){return this._()}l(t){const e=this.p();(function(t){const e=new URLSearchParams(t);return new Map(Array.from(e.keys()).map((t=>[t,e.getAll(t)])))})(t).forEach(((t,n)=>{const i=e.filter((t=>t.matches(`[name="${n}"]`)));0!==i.length&&i.forEach(((e,n)=>{"checked"in e&&["checkbox","radio"].includes(e.type)?t.forEach((t=>{e.value===t&&(e.checked=!0)})):n<t.length&&(e.value=t[n])}))}))}}}));
